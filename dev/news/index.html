<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • promises</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><meta name="robots" content="noindex"></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">promises</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.4.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><h6 class="dropdown-header" data-toc-skip>Overview</h6></li>
    <li><a class="dropdown-item" href="../articles/promises_01_motivation.html">1. Why use promises?</a></li>
    <li><a class="dropdown-item" href="../articles/promises_02_intro.html">2. An informal intro to async programming</a></li>
    <li><a class="dropdown-item" href="../articles/promises_03_overview.html">3. Working with promises</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Integration</h6></li>
    <li><a class="dropdown-item" href="../articles/promises_04_mirai.html">4. Launching tasks with mirai</a></li>
    <li><a class="dropdown-item" href="../articles/promises_05a_futures.html">5a. Launching tasks with future</a></li>
    <li><a class="dropdown-item" href="../articles/promises_05b_future_promise.html">5b. Advanced future and promises usage</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Usage</h6></li>
    <li><a class="dropdown-item" href="../articles/promises_06_shiny.html">6. Using promises with Shiny</a></li>
    <li><a class="dropdown-item" href="../articles/promises_07_combining.html">7. Combining promises</a></li>
    <li><a class="dropdown-item" href="../articles/promises_08_casestudy.html">8. Case study: Converting a Shiny app to async</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rstudio/promises/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Changelog</h1>
      <small>Source: <a href="https://github.com/rstudio/promises/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="development version" id="promises-development-version">promises (development version)<a class="anchor" aria-label="anchor" href="#promises-development-version"></a></h2>
<ul><li>A promise is now a simple classed environment rather than an R6 class. This reduces their creation overhead by up to 10x, thereby substantially improving performance. (<a href="https://github.com/rstudio/promises/issues/191" class="external-link">#191</a>)</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.4.0" id="promises-140">promises 1.4.0<a class="anchor" aria-label="anchor" href="#promises-140"></a></h2><p class="text-muted">CRAN release: 2025-10-22</p>
<div class="section level3">
<h3 id="breaking-changes-1-4-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-1-4-0"></a></h3>
<ul><li>Nested promise domains now correctly invoke in reverse order. Previously, when promise domains were nested, the outer domain would incorrectly take precedence over the inner domain in <code>wrapOnFulfilled</code>/<code>wrapOnRejected</code> callbacks. The innermost (most recently added) domain now properly wraps the callback first, ensuring that nested promise domains behave consistently with the expected scoping behavior. (<a href="https://github.com/rstudio/promises/issues/165" class="external-link">#165</a>)</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-1-4-0">New features<a class="anchor" aria-label="anchor" href="#new-features-1-4-0"></a></h3>
<ul><li><p><code><a href="../reference/hybrid_then.html">hybrid_then()</a></code> synchronously or asynchronously executes success/failure callbacks based on whether the input is a promise or a regular value. This function is useful for writing code that can handle both synchronous and asynchronous inputs seamlessly. (<a href="https://github.com/rstudio/promises/issues/192" class="external-link">#192</a>)</p></li>
<li><p><code><a href="../reference/then.html">then()</a></code> gains a <code>tee</code> parameter. When <code>tee = TRUE</code>, <code><a href="../reference/then.html">then()</a></code> ignores the return value of the callback and returns the original value instead. This is useful for performing operations with side-effects, particularly logging to the console or a file. <code><a href="../reference/then.html">finally()</a></code> does not support <code>tee</code> as the return value is always ignored. (<a href="https://github.com/rstudio/promises/issues/148" class="external-link">#148</a>)</p></li>
</ul><div class="section level4">
<h4 id="opentelemetry-integration-1-4-0">OpenTelemetry integration<a class="anchor" aria-label="anchor" href="#opentelemetry-integration-1-4-0"></a></h4>
<p>promises now integrates with the otel package to provide observability and tracing for asynchronous operations. OpenTelemetry integration is experimental and subject to change.</p>
<ul><li><p><code><a href="../reference/otel.html">with_ospan_async()</a></code> creates an OpenTelemetry span, executes the given expression within it, and ends the span. This function handles both synchronous and asynchronous (promise-based) operations. For promises, the span is automatically ended when the promise resolves or rejects. To access the OpenTelemetry span within your expression, use <code>otel::get_current_span()</code>. (<a href="https://github.com/rstudio/promises/issues/173" class="external-link">#173</a>)</p></li>
<li><p><code><a href="../reference/otel.html">with_ospan_promise_domain()</a></code> creates a promise domain that restores the currently active OpenTelemetry span from when a call to <code><a href="../reference/then.html">then()</a></code> is executed. This enables proper tracing context across asynchronous operations. (<a href="https://github.com/rstudio/promises/issues/173" class="external-link">#173</a>)</p></li>
<li><p><code><a href="../reference/otel.html">local_ospan_promise_domain()</a></code> adds an OpenTelemetry span promise domain to the local scope. This is useful for <a href="https://github.com/r-lib/coro" class="external-link">coro</a> operations where encapsulating the coro operations inside <code>with_*()</code> methods is not allowed. (<a href="https://github.com/rstudio/promises/issues/179" class="external-link">#179</a>)</p></li>
</ul></div>
</div>
<div class="section level3">
<h3 id="minor-improvements-and-fixes-1-4-0">Minor improvements and fixes<a class="anchor" aria-label="anchor" href="#minor-improvements-and-fixes-1-4-0"></a></h3>
<ul><li><p>promises now requires R 4.1 or later. R’s native pipe (<code>|&gt;</code>) and function shorthand (<code>\(x) fn(x)</code>) syntax are now preferred over promise pipe methods. The promise pipe methods (<code>%...&gt;%</code>, <code>%...!%</code>, <code>%...T&gt;%</code>) are now superseded in favor of the R syntax supported in R 4.1 or later. (<a href="https://github.com/rstudio/promises/issues/148" class="external-link">#148</a>)</p></li>
<li><p><code><a href="../reference/then.html">catch()</a></code> API updated from <code>catch(promise, onRejected, tee = FALSE)</code> to <code>catch(promise, onRejected, ..., tee = FALSE)</code>. The <code>tee</code> parameter must now be specified as a keyword argument. (<a href="https://github.com/rstudio/promises/issues/148" class="external-link">#148</a>)</p></li>
<li><p><code>then(tee=)</code> and <code>catch(tee=)</code> now require a logical value (not just a truthy value). (<a href="https://github.com/rstudio/promises/issues/156" class="external-link">#156</a>)</p></li>
<li><p>promises is now a pure R package that does not require compilation. We include a test of a C++ interface in <code>inst/promise_task.cpp</code> that is now dynamically compiled during testing. (<a href="https://github.com/rstudio/promises/issues/154" class="external-link">#154</a>)</p></li>
<li><p><code><a href="../reference/promise_all.html">promise_all()</a></code> performance improved by using a counter instead of checking completion status of all promises. This changes the time complexity from <code>O(n^2)</code> to <code>O(n)</code> for determining when all promises are complete. (<a href="https://github.com/rstudio/promises/issues/163" class="external-link">#163</a>)</p></li>
<li><p><code><a href="../reference/promise_all.html">promise_all()</a></code> now preserves duplicate named arguments (or <code>.list</code> entries). A result will be produced for every promise provided. (<a href="https://github.com/rstudio/promises/issues/163" class="external-link">#163</a>)</p></li>
<li><p><code><a href="../reference/promise_map.html">promise_map()</a></code> now properly handles <code>NULL</code> values being returned. (Thank you, <a href="https://github.com/RLesur" class="external-link">@RLesur</a>! <a href="https://github.com/rstudio/promises/issues/47" class="external-link">#47</a>)</p></li>
<li><p>promises no longer imports base packages in DESCRIPTION. (Thank you, <a href="https://github.com/shikokuchuo" class="external-link">@shikokuchuo</a>! <a href="https://github.com/rstudio/promises/issues/186" class="external-link">#186</a>)</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.3.3" id="promises-133">promises 1.3.3<a class="anchor" aria-label="anchor" href="#promises-133"></a></h2><p class="text-muted">CRAN release: 2025-05-29</p>
<ul><li><p>Changed the way we create future objects to stay compatible with new versions of <a href="https://future.futureverse.org" class="external-link">future</a>. Apparently the way we were doing it was never idiomatic and only worked by accident. (<a href="https://github.com/rstudio/promises/issues/121" class="external-link">#121</a>)</p></li>
<li><p>Fixed <a href="https://github.com/rstudio/promises/issues/122" class="external-link">#122</a>: Use <code>future::future(..., lazy = TRUE)</code> to avoid manual capturing of state within <code>future_promise</code> (Thank you, <a href="https://github.com/HenrikBengtsson" class="external-link">@HenrikBengtsson</a>! <a href="https://github.com/rstudio/promises/issues/123" class="external-link">#123</a>)</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.3.2" id="promises-132">promises 1.3.2<a class="anchor" aria-label="anchor" href="#promises-132"></a></h2><p class="text-muted">CRAN release: 2024-11-27</p>
<ul><li>Fixed bug introduced in 1.3.1, where promise domains that are active at promise resolution time stay active during handler callback, even if they weren’t active when the handler was registered. This was causing stack overflow for long promise chains with many active promise domains. (<a href="https://github.com/rstudio/promises/issues/115" class="external-link">#115</a>)</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.3.1" id="promises-131">promises 1.3.1<a class="anchor" aria-label="anchor" href="#promises-131"></a></h2><p class="text-muted">CRAN release: 2024-11-26</p>
<ul><li>Fixed bug where promise domains were forgotten when handlers were registered from within other handlers. (<a href="https://github.com/rstudio/promises/issues/110" class="external-link">#110</a>)</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.3.0" id="promises-130">promises 1.3.0<a class="anchor" aria-label="anchor" href="#promises-130"></a></h2><p class="text-muted">CRAN release: 2024-04-05</p>
<ul><li>
<code>is.promising</code> is now an S3 method. (<a href="https://github.com/rstudio/promises/issues/104" class="external-link">#104</a>)</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.2.1" id="promises-121">promises 1.2.1<a class="anchor" aria-label="anchor" href="#promises-121"></a></h2><p class="text-muted">CRAN release: 2023-08-10</p>
<ul><li><p><code><a href="../reference/future_promise.html">future_promise()</a></code> received a speed improvement when submitting many requests with a minimal number of <a href="https://future.futureverse.org" class="external-link">future</a> workers. If <code><a href="../reference/future_promise.html">future_promise()</a></code> runs out of available <a href="https://future.futureverse.org" class="external-link">future</a> workers, then <code><a href="../reference/future_promise.html">future_promise()</a></code> will preemptively return for the remainder of the current <a href="https://later.r-lib.org" class="external-link">later</a> execution. While it is possible for <a href="https://future.futureverse.org" class="external-link">future</a> to finish a job before submitting all of the <code><a href="../reference/future_promise.html">future_promise()</a></code> requests, the time saved by not asking <a href="https://future.futureverse.org" class="external-link">future</a>’s worker availability will be faster overall than if a few jobs were submitted early. (<a href="https://github.com/rstudio/promises/issues/78" class="external-link">#78</a>)</p></li>
<li><p>Fixed <a href="https://github.com/rstudio/promises/issues/86" class="external-link">#86</a>: <code><a href="../reference/future_promise.html">future_promise()</a></code> spuriously reports unhandled errors. (<a href="https://github.com/rstudio/promises/issues/90" class="external-link">#90</a>)</p></li>
<li><p>Move <a href="https://r-lib.github.io/fastmap/" class="external-link">fastmap</a> from <code>Suggests</code> to <code>Imports</code> for better <a href="https://rstudio.github.io/renv/" class="external-link">renv</a> discovery. (<a href="https://github.com/rstudio/promises/issues/87" class="external-link">#87</a>)</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.2.0.1" id="promises-1201">promises 1.2.0.1<a class="anchor" aria-label="anchor" href="#promises-1201"></a></h2><p class="text-muted">CRAN release: 2021-02-11</p>
<ul><li><p>Added <code><a href="../reference/future_promise.html">future_promise()</a></code> which returns a <code>promise</code> that executes the expression using <code><a href="https://future.futureverse.org/reference/future.html" class="external-link">future::future()</a></code>. <code><a href="../reference/future_promise.html">future_promise()</a></code> should (typically) be a drop-in replacement for any <code><a href="https://future.futureverse.org/reference/future.html" class="external-link">future::future()</a></code> function call. <code><a href="../reference/future_promise.html">future_promise()</a></code> will not execute <code>future</code> work faster than <code><a href="https://future.futureverse.org/reference/future.html" class="external-link">future::future()</a></code>, but <code><a href="../reference/future_promise.html">future_promise()</a></code> will only submit <code>future</code> jobs if a worker is available. If no workers are available, <code><a href="../reference/future_promise.html">future_promise()</a></code> will hold the expression information in a <code>promise</code> until a worker does become available to better take advantage of computing resources available to the main R session. For more information, please see the <a href="https://rstudio.github.io/promises/articles/promises_05b_future_promise.html"><code>future_promise()</code> article</a>. (<a href="https://github.com/rstudio/promises/issues/62" class="external-link">#62</a>)</p></li>
<li><p>Added visibility support for <code>Promise$then(onFulfilled)</code>. (<a href="https://github.com/rstudio/promises/issues/59" class="external-link">#59</a>)</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.1" id="promises-111">promises 1.1.1<a class="anchor" aria-label="anchor" href="#promises-111"></a></h2><p class="text-muted">CRAN release: 2020-06-09</p>
<ul><li>Fix handling of FutureErrors during <code><a href="https://future.futureverse.org/reference/resolved.html" class="external-link">future::resolved()</a></code> and <code><a href="https://future.futureverse.org/reference/value.html" class="external-link">future::value()</a></code> by discarding the corrupt future. (<a href="https://github.com/rstudio/promises/issues/37" class="external-link">#37</a>)</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.0" id="promises-110">promises 1.1.0<a class="anchor" aria-label="anchor" href="#promises-110"></a></h2><p class="text-muted">CRAN release: 2019-10-04</p>
<ul><li><p>Fixed <a href="https://github.com/rstudio/promises/issues/49" class="external-link">#49</a>: <code><a href="../reference/promise_all.html">promise_all()</a></code> previously did not handle <code>NULL</code> values correctly. (<a href="https://github.com/rstudio/promises/issues/50" class="external-link">#50</a>)</p></li>
<li><p><code>new_promise_domain</code> now takes a <code>wrapOnFinally</code> argument, which can be used to intercept registration of <code><a href="../reference/then.html">finally()</a></code>. Previous versions treated <code>finally</code> as passing the same callback to <code>then(onFulfilled=..., onRejected=...)</code>, and ignoring the result; for backward compatibility, promise domains will still treat <code>finally</code> that way by default (i.e. if <code>wrapOnFinally</code> is <code>NULL</code>, then <code>finally</code> will result in <code>wrapOnFulfilled</code> and <code>wrapOnRejected</code> being called, but if <code>wrapOnFinally</code> is provided then only <code>wrapOnFinally</code> will be called). (<a href="https://github.com/rstudio/promises/issues/43" class="external-link">#43</a>)</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.1" id="promises-101">promises 1.0.1<a class="anchor" aria-label="anchor" href="#promises-101"></a></h2><p class="text-muted">CRAN release: 2018-04-13</p>
<ul><li>Initial CRAN release</li>
</ul></div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by Joe Cheng, <a href="http://schloerke.com" class="external-link">Barret Schloerke</a>, <a href="https://github.com/wch" class="external-link">Winston Chang</a>, Charlie Gao, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

  </div></footer></body></html>

